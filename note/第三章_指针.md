# 第三章 指针

指针中存放的是地址

指针变量中放的是谁的地址，*指针变量就是谁

同种类型指针可以且仅可以进行减法运算，加法运算没有意义

**指针所占空间大小仅取决于当前编译环境**
- 32位：4（默认按照32位）
- 64位：8

**指针可以指向函数**

**空指针和野指针无法进行取形访问**

```C
int* p1 = NULL, p2;
p2 = *p1;	//编译错误
```

## 野指针和悬空指针

野指针和悬空指针都是指针使用中常见的两种错误情况，它们的区别如下：
1. **野指针**：野指针是指向"垃圾"内存的指针，也就是说，它的值是不确定的。野指针通常是由未初始化的指针造成的。例如，声明了一个指针变量但没有给它赋值，那么这个指针就是一个野指针。
   ```C
   int *p; // p是一个野指针，因为它没有被初始化
   ```
2. **悬空指针**：悬空指针是指向已经被释放（或删除）的内存的指针。例如，使用free函数释放了一个动态分配的内存块，但仍然保留了指向这个内存块的指针，那么这个指针就是一个悬空指针。
   ```C
   int *p = malloc(sizeof(int)); // p指向一个动态分配的内存块
	free(p); // 这个内存块被释放
	// 此时，p是一个悬空指针，因为它指向的内存已经被释放
   ```
   野指针和悬空指针都可能导致程序崩溃或其他未定义的行为，因此在使用指针时，需要确保指针总是指向有效的内存，并且在释放内存后不再使用指向这个内存的指针。

## 函数指针 函数指针数组 指针函数 指针数组

1. 函数指针：这是一个指针，它指向一个函数。例如，`int (*p)(int)`是一个函数指针，它指向一个接受一个整数参数并返回整数的函数。

2. 函数指针数组：这是一个数组，它的每个元素都是函数指针。例如，`int (*s[10])(int)`是一个函数指针数组，它有10个元素，每个元素都是一个指向接受一个整数参数并返回整数的函数的指针。

3. 指针函数：这是一个函数，它返回一个指针。例如，`int *func(int)`是一个指针函数，它接受一个整数参数并返回一个指向整数的指针。

4. 指针数组：这是一个数组，它的每个元素都是指针。例如，`int *p[10]`是一个指针数组，它有10个元素，每个元素都是一个指向整数的指针。

## 实例1

```C
#include<stdio.h>
int main() {
	int a = 10;
	int b = 20;
	int* pa = &a;
	int* pb = pa;
	*pb = b;
	b = 6;
	printf("%d ", a);
	printf("%d ", b);
	printf("%d ", *pa);
	printf("%d ", *pb);
	pb = &b;
	a = 8;
	printf("%d ", a);
	printf("%d ", b);
	printf("%d ", *pa);
	printf("%d ", *pb);
	*pb = a;
	*pa = *pb;
	pa = pb;
	printf("%d ", a);
	printf("%d ", b);
	printf("%d ", *pa);
	printf("%d ", *pb);
	return 0;
}
```

输出结果：

```text
20
6
20
20
8
6
8
6
8
8
8
8
```

## 课后习题一

```C
#include<stdio.h>
int main() {
	//指针变量中放的是谁的地址，*指针变量就是谁
	int a = 10;
	int b = 20;
	int* pa = &a;
	int* pb = &b;
	*pb = a;
	a = 2;
	printf("%d ", a);
	printf("%d ", b);
	printf("%d ", *pa);
	printf("%d ", *pb);
	*pb = *pa;
	pb = pa;
	a = 8;
	printf("%d ", a);
	printf("%d ", b);
	printf("%d ", *pa);
	printf("%d ", *pb);
	pb = &a;
	*pa = a;
	pa = &b;
	*pb = b;
	printf("%d ", a);
	printf("%d ", b);
	printf("%d ", *pa); 
	printf("%d ", *pb);
	return 0;
}
```

输出结果：

```text
2
10
2
10
8
2
8
8
2
2
2
2
```

